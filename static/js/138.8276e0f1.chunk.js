"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[138],{5138:function(e,t,n){n.r(t);var r=n(4165),s=n(5861),a=n(9439),i=n(7313),o=n(6573),c=n(6417),u={card:{border:"1px solid #ccc",borderRadius:"8px",padding:"16px",marginBottom:"16px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},form:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderRadius:"5px",marginTop:"70px",width:"110%",border:"2px solid lightgrey"},label:{fontWeight:"bold",marginBottom:"10px",width:"100%"},select:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",color:"black",appearance:"menulist"},input:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},button:{marginTop:"20px",padding:"8px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}};t.default=function(){var e=(0,i.useState)(""),t=(0,a.Z)(e,2),n=t[0],l=t[1],d=(0,i.useState)(""),p=(0,a.Z)(d,2),x=p[0],h=p[1],f=(0,i.useState)(""),v=(0,a.Z)(f,2),b=v[0],m=v[1],g=(0,i.useState)([]),j=(0,a.Z)(g,2),Z=j[0],y=j[1],k=(0,i.useState)([]),w=(0,a.Z)(k,2),S=w[0],C=w[1],I=(0,i.useState)([]),A=(0,a.Z)(I,2),F=A[0],R=A[1],D=(0,i.useState)({}),N=(0,a.Z)(D,2),_=(N[0],N[1]);(0,i.useEffect)((function(){B()}),[]);var B=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("http://server3.khaugalli.info/api/classes");case 3:t=e.sent,y(t.data),console.log(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){n&&E()}),[n]);var E=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("http://server3.khaugalli.info/api/students/".concat(n));case 3:t=e.sent,C(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,o.Z.post("http://server3.khaugalli.info/api/fess",{studentId:x,feeAmount:b});case 4:n=e.sent,console.log(n.data),h(""),m(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){z()}),[]);var z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("http://server3.khaugalli.info/api/fess/get");case 3:t=e.sent,R(t.data),P(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.map((function(e){return e.studentId})),e.next=4,o.Z.post("http://server3.khaugalli.info/api/student/bulk",{studentIds:n});case 4:s=e.sent,a=s.data,i=a.reduce((function(e,t){return e[t._id]=t,e}),{}),_(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{style:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)("div",{style:{width:"35%"},children:(0,c.jsxs)("form",{onSubmit:T,style:u.form,children:[(0,c.jsx)("h1",{style:{marginBottom:"20px"},children:"Fees Payment"}),(0,c.jsx)("br",{}),(0,c.jsxs)("label",{style:u.label,children:[(0,c.jsx)("p",{children:"Class:"}),(0,c.jsxs)("select",{value:n,onChange:function(e){l(e.target.value),h(""),C([]),E()},style:u.select,children:[(0,c.jsx)("option",{value:"",disabled:!0,children:"Select Class"}),Z&&Z.length>0?Z.map((function(e){return(0,c.jsx)("option",{value:e,children:e},e)})):(0,c.jsx)("option",{value:"",disabled:!0,children:"Loading..."})]})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("label",{style:u.label,children:[(0,c.jsx)("p",{children:" Student:"}),(0,c.jsxs)("select",{value:x,onChange:function(e){h(e.target.value)},style:u.select,children:[(0,c.jsx)("option",{value:"",children:"Select Student"}),S.map((function(e){return(0,c.jsxs)("option",{value:e._id,children:[e.studentName," - ",e.fatherName]},e._id)}))]})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("label",{style:u.label,children:[(0,c.jsx)("p",{children:" Amount:"}),(0,c.jsx)("input",{type:"text",value:b,onChange:function(e){return m(e.target.value)},style:u.input})]}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{type:"submit",style:u.button,onPress:T,children:"Submit Fee"})]})}),(0,c.jsxs)("div",{style:{marginTop:"80px",width:"60%"},children:[(0,c.jsx)("h2",{children:"Fee Submissions"}),(0,c.jsx)("br",{}),F.map((function(e){var t,n;return(0,c.jsxs)("div",{style:u.card,children:[(0,c.jsxs)("p",{children:["Student: ",null===(t=e.studentId)||void 0===t?void 0:t.studentName]}),(0,c.jsxs)("p",{children:["Amount: ",e.feeAmount]}),(0,c.jsxs)("p",{children:["Class ID: ",null===(n=e.studentId)||void 0===n?void 0:n.className]})]},e._id)}))]})]})})}}}]);